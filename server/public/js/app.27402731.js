(function(t){function e(e){for(var a,o,n=e[0],l=e[1],c=e[2],d=0,g=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&g.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(g.length)g.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,n=1;n<s.length;n++){var l=s[n];0!==r[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},r={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("71ec"),r=s.n(a);r.a},"3ec7":function(t,e,s){"use strict";var a=s("8d04"),r=s.n(a);r.a},"481f":function(t,e,s){"use strict";var a=s("49e9"),r=s.n(a);r.a},"49e9":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("4989"),s("ab8b"),s("db4d");var a=s("2b0e"),r=s("039f"),i=s("f309");a["default"].use(i["a"]);var o=new i["a"]({icons:{iconfont:"mdi"}}),n=s("487a"),l=s.n(n),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{attrs:{id:"app"}},["/"===t.$route.path?s("div",[""!==t.alertType?s("v-alert",{attrs:{type:t.alertType}},[t._v(t._s(t.messageAlert)+"!")]):t._e(),s("v-toolbar",{attrs:{color:"#BBDEFB"}},[s("v-toolbar-title",{staticClass:"wellcom"},[t._v("Wellcome")]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{staticClass:"title-text",attrs:{text:"",color:"#800000"},on:{click:function(e){t.isDialogLogin=!0}}},[t._v("\n          Login\n        ")]),s("v-btn",{staticClass:"title-text",attrs:{text:"",color:"#800000"},on:{click:function(e){t.isDialogSignup=!0}}},[t._v("SignUp")])],1)],1),s("router-view")],1):s("div",[s("v-app-bar",{attrs:{app:"","clipped-left":"",color:"#BBDEFB"}},[s("v-toolbar-title",{staticClass:"wellcom font-italic font-weight-bold"},[t._v("Wellcome to the world of music")]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{staticClass:"title-text",attrs:{text:"",color:"#800000"},on:{click:t.logout}},[t._v("\n          Logout\n        ")])],1)],1),s("v-navigation-drawer",{staticClass:"routes-container",attrs:{color:"side-bar",app:"",clipped:""}},[s("div",{staticClass:"mt-3"},[s("v-avatar",{attrs:{width:"100",height:"100"}},[s("img",{attrs:{src:"https://cdn.vuetifyjs.com/images/john.jpg",alt:"John"}})]),s("div",[s("p",{staticClass:"ma-0"},[t._v(t._s(t.inforUser.user_name))]),s("p",[t._v(t._s(t.inforUser.email))])])],1),s("v-divider"),s("v-list",t._l(t.drawerItems,(function(e){return s("v-list-item",{key:e.name,attrs:{to:e.path}},[s("v-icon",[t._v(t._s(e.icon))]),s("v-list-item-content",{staticClass:"ma-0 ml-5"},[t._v(t._s(e.name))])],1)})),1)],1),s("v-content",[s("router-view")],1)],1),s("div",{staticClass:"text-center"},[s("v-dialog",{attrs:{width:"500"},model:{value:t.isDialogLogin,callback:function(e){t.isDialogLogin=e},expression:"isDialogLogin"}},[s("v-card",[s("v-card-title",{staticClass:"headline teal lighten-4 title-text",attrs:{"primary-title":""}},[t._v("\n          Login\n        ")]),s("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-container",[s("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:"",type:"email"},model:{value:t.emailLogin,callback:function(e){t.emailLogin=e},expression:"emailLogin"}}),s("v-text-field",{attrs:{label:"Password",required:"",type:"password"},model:{value:t.passwordLogin,callback:function(e){t.passwordLogin=e},expression:"passwordLogin"}})],1)],1),s("facebook-login",{ref:"facebook",staticClass:"button",attrs:{appId:"809445012885813"},on:{login:t.getUserData,logout:t.logout,"get-initial-status":t.getUserData}}),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"red",text:"",disabled:t.requestingLogin,loading:t.requestingLogin},on:{click:function(e){t.isDialogLogin=!1}}},[t._v("\n            Cancel\n          ")]),s("v-btn",{attrs:{color:"green",text:"",disabled:t.requestingLogin,loading:t.requestingLogin},on:{click:t.login}},[t._v("\n            Login\n          ")])],1)],1)],1),s("v-dialog",{attrs:{width:"500"},model:{value:t.isDialogSignup,callback:function(e){t.isDialogSignup=e},expression:"isDialogSignup"}},[s("v-card",[s("v-card-title",{staticClass:"headline teal lighten-4 title-text",attrs:{"primary-title":""}},[t._v("\n          SignUp\n        ")]),s("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-container",[s("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:"",type:"email"},model:{value:t.emailSignup,callback:function(e){t.emailSignup=e},expression:"emailSignup"}}),s("v-text-field",{attrs:{label:"Password",required:"",type:"password"},model:{value:t.passwordSignup,callback:function(e){t.passwordSignup=e},expression:"passwordSignup"}})],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"red",text:"",disabled:t.requestingSignup,loading:t.requestingSignup},on:{click:function(e){t.isDialogSignup=!1}}},[t._v("\n            Cancel\n          ")]),s("v-btn",{attrs:{color:"green",text:"",disabled:t.requestingSignup,loading:t.requestingSignup},on:{click:t.signUp}},[t._v("\n            Signin\n          ")])],1)],1)],1)],1)])},u=[],d=s("2f62"),g=s("2ef0"),p=s.n(g),m=s("6d09"),h=s.n(m);const v="login_key";class f{static getAuth(){return JSON.parse(localStorage.getItem(v))}static setAuth(t){return localStorage.setItem(v,t)}static deleteAuth(){return localStorage.removeItem(v)}}var _={components:{facebookLogin:h.a},data(){return{valid:!1,isDialogLogin:!1,isDialogSignup:!1,emailLogin:"",emailSignup:"",passwordSignup:"",passwordLogin:"",name:"",alertType:"",emailRules:[t=>!!t||"E-mail is required",t=>/.+@.+/.test(t)||"E-mail must be valid"],icons:["mdi-facebook-box","mdi-fa-twitter"],messageAlert:"",drawerItems:[{name:"Home",icon:"mdi-home",path:"/home"},{name:"Book Mark",icon:"mdi-bookmark-multiple",path:"/favorite"},{name:"Profile",icon:"mdi-account",path:"/profile"},{name:"My Music",icon:"mdi-playlist-music",path:"/my-music"}],isDrawer:!1}},computed:{...Object(d["b"])({requestingSignup:t=>Object(g["get"])(t,"user.signUp.requesting",!1),requestingLogin:t=>Object(g["get"])(t,"user.signUp.requesting",!1),status:t=>Object(g["get"])(t,"user.signUp.status")}),inforUser(){return f.getAuth()}},methods:{signUp(){const t={username:this.name,email:this.emailSignup,password:this.passwordSignup};this.$store.dispatch("signUp",t).then(()=>{this.isDialogSignup=!1,this.alertType=Object(g["get"])(this.$store,"state.user.signUp.status"),this.messageAlert=`Signup ${this.alertType}`,setTimeout(()=>{this.alertType="",this.messageAlert=""},5e3)})},login(){const t={email:this.emailLogin,password:this.passwordLogin};this.$store.dispatch("login",t).then(()=>{const t=Object(g["get"])(this.$store,"state.user.login.status");"success"===t&&(this.emailLogin="",this.passwordLogin="",this.isDialogLogin=!1,this.$router.push({path:"/home"}))})},logout(){this.$store.dispatch("logout")},getUserData(t){const e={accessToken:Object(g["get"])(t,"response.authResponse.accessToken"),typeSocial:"facebook"};this.$store.dispatch("loginSocial",e).then(()=>{const t=Object(g["get"])(this.$store,"state.user.loginWithSocail.status");"success"===t&&(this.isDialogLogin=!1,this.$router.push({path:"/home"}))})},onLogout(t){console.log("hehe",t)}}},b=_,y=(s("034f"),s("2877")),C=s("6544"),x=s.n(C),S=s("0798"),O=s("7496"),w=s("40dc"),U=s("8212"),I=s("8336"),P=s("b0af"),T=s("99d9"),E=s("a523"),V=s("a75b"),k=s("169a"),j=s("ce7e"),A=s("4bd4"),L=s("132d"),q=s("8860"),F=s("da13"),D=s("5d23"),$=s("f774"),B=s("2fa4"),R=s("8654"),N=s("71d9"),G=s("2a7f"),W=Object(y["a"])(b,c,u,!1,null,null,null),M=W.exports;x()(W,{VAlert:S["a"],VApp:O["a"],VAppBar:w["a"],VAvatar:U["a"],VBtn:I["a"],VCard:P["a"],VCardActions:T["a"],VCardTitle:T["d"],VContainer:E["a"],VContent:V["a"],VDialog:k["a"],VDivider:j["a"],VForm:A["a"],VIcon:L["a"],VList:q["a"],VListItem:F["a"],VListItemContent:D["a"],VNavigationDrawer:$["a"],VSpacer:B["a"],VTextField:R["a"],VToolbar:N["a"],VToolbarItems:G["a"],VToolbarTitle:G["b"]});var z=s("8c4f"),H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-layout",[s("v-container",{attrs:{fluid:""}},[s("v-row",{staticClass:"justify-content-end",attrs:{align:"center"}},[s("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[s("v-text-field",{attrs:{label:"Search",filled:""}})],1),s("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3"}},[s("v-select",{attrs:{items:t.items,filled:"",label:"Filled style"}})],1)],1)],1)],1),s("v-layout",[s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"row",attrs:{"infinite-scroll-disabled":"requestigGetPost","infinite-scroll-distance":"500"}},t._l(t.posts||[],(function(e,a){return s("v-flex",{key:a,attrs:{xs12:"",md4:""}},[s("v-card",{staticClass:"mx-auto ma-5 ml-5 mr-5"},[s("v-list-item",[s("v-avatar",{attrs:{width:"50",height:"50"}},[s("img",{attrs:{src:e.user.profile.avatar||"https://cdn.vuetifyjs.com/images/john.jpg",alt:"John"}})]),s("v-list-item-content",[s("v-list-item-title",{staticClass:"headline"},[t._v(t._s(e.name_post))]),s("v-list-item-subtitle",[t._v(t._s("by "+e.user.profile.user_name))])],1)],1),s("v-img",{attrs:{src:e.image_url,height:"200px"}}),s("v-card-text",{staticClass:"txt-description"},[t._v("\n            "+t._s(e.description_post)+"\n          ")]),s("v-card-actions",[s("v-btn",{attrs:{text:"",color:"deep-purple accent-4"}},[t._v("\n              Read\n            ")]),s("v-btn",{attrs:{text:"",color:"deep-purple accent-4"}},[t._v("\n              Bookmark\n            ")]),s("v-spacer"),s("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(s){return t.handleFavorite(e.id)}}},[s("v-icon",[t._v(t._s(e.favorited.find((function(e){return e.id===t.userInfor.id}))?"mdi-heart":"mdi-heart-outline"))])],1),s("span",[t._v(t._s(e.__meta__.favorited_count))])],1)],1)],1)})),1)])],1)},Q=[],J={data(){return{items:["Foo","Bar","Fizz","Buzz"],favorites:[1]}},mounted(){f.getAuth();const t={page:1};this.$store.dispatch("getPosts",t)},computed:{...Object(d["b"])({posts:t=>Object(g["get"])(t,"post.post.result.posts",[])||[],statePosts:t=>Object(g["get"])(t,"post.post"),requestigGetPost:t=>Object(g["get"])(t,"post.post.requesting")}),userInfor(){return f.getAuth()},colorFavorite(){return this.favorites.includes(1)?"red":"white"}},methods:{loadMore(){if(Object(g["get"])(this.statePosts,"result.page")>=Object(g["get"])(this.statePosts,"result.lastPage"))return;if(this.requestigGetPost)return;const t={page:Object(g["get"])(this.statePosts,"result.page",1)+1};this.$store.dispatch("getPosts",t)},handleFavorite(t){const e={user_id:this.userInfor.id,post_id:t};this.$store.dispatch("favorite",e)}}},Y=J,K=(s("cccb"),s("62ad")),X=s("0e8f"),Z=s("adda"),tt=s("a722"),et=s("0fd9"),st=s("b974"),at=Object(y["a"])(Y,H,Q,!1,null,null,null),rt=at.exports;x()(at,{VAvatar:U["a"],VBtn:I["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCol:K["a"],VContainer:E["a"],VFlex:X["a"],VIcon:L["a"],VImg:Z["a"],VLayout:tt["a"],VListItem:F["a"],VListItemContent:D["a"],VListItemSubtitle:D["b"],VListItemTitle:D["c"],VRow:et["a"],VSelect:st["a"],VSpacer:B["a"],VTextField:R["a"]});var it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vh-100 bg-info d-flex flex-column justify-content-center align-items-center login-container"},[t._m(0),s("div",{staticClass:"login-card bg-semi-transparent card px-4 pt-5 pb-4 shadow-lg w-25 rounded-0 text-left"},[s("ValidationObserver",{ref:"signInValidator",scopedSlots:t._u([{key:"default",fn:function(e){e.invalid;return[s("TextField",{attrs:{name:"Username or Email",hiddenLabel:"true",type:"text",rules:"required",placeholder:"Username or Email"},model:{value:t.signInForm.usernameOrEmail,callback:function(e){t.$set(t.signInForm,"usernameOrEmail",e)},expression:"signInForm.usernameOrEmail"}}),s("div",{staticClass:"mt-4"}),s("TextField",{attrs:{name:"Password",hiddenLabel:"true",type:"password",rules:"required|min:6",placeholder:"Password"},model:{value:t.signInForm.password,callback:function(e){t.$set(t.signInForm,"password",e)},expression:"signInForm.password"}}),s("button",{staticClass:"btn btn-block btn-outline-dark mt-4 rounded-form",on:{click:t.handleSignIn}},[s("span",{staticClass:"font-weight-normal text-uppercase"},[t._v("login")])])]}}])}),t._m(1)],1),s("div",{staticClass:"modal fade",attrs:{id:"exampleModalLong",tabindex:"-1",role:"dialog","data-backdrop":"static"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered ",attrs:{role:"document"}},[s("div",{staticClass:"modal-content rounded-0 shadow-lg"},[s("ValidationObserver",{ref:"signUpValidator"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title lead text-dark"},[t._v("Register New Account")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[s("span",{staticClass:"text-danger",attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),s("div",{staticClass:"modal-body text-left px-4"},[s("form",[s("TextField",{attrs:{name:"Email",type:"email",rules:"required|email"},model:{value:t.signUpForm.email,callback:function(e){t.$set(t.signUpForm,"email",e)},expression:"signUpForm.email"}},[s("small",{staticClass:"text-muted",attrs:{slot:"description"},slot:"description"},[t._v("\n                  We'll never share your email with anyone else.\n                ")])]),s("TextField",{attrs:{name:"Username",type:"text",rules:"required"},model:{value:t.signUpForm.username,callback:function(e){t.$set(t.signUpForm,"username",e)},expression:"signUpForm.username"}}),s("TextField",{attrs:{name:"Password",type:"password",rules:"required|min:6",vid:"confirmation"},model:{value:t.signUpForm.password,callback:function(e){t.$set(t.signUpForm,"password",e)},expression:"signUpForm.password"}}),s("TextField",{attrs:{name:"Confirm Password",type:"password",rules:"required|min:6|confirmed:confirmation"},model:{value:t.signUpForm.confirmPassword,callback:function(e){t.$set(t.signUpForm,"confirmPassword",e)},expression:"signUpForm.confirmPassword"}})],1)]),s("div",{staticClass:"modal-footer px-4"},[s("button",{staticClass:"btn btn-outline-dark rounded-form btn-block my-2",attrs:{type:"button"},on:{click:t.handleSignUp}},[t._v("\n              SEND\n            ")])])])],1)])])])},ot=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-5 pb-3"},[s("blockquote",{staticClass:"blockquote text-center"},[s("p",{staticClass:"mb-0 h1 font-weight-lighter font-italic title"},[t._v("\n        Vuejs Adonis CRUD System demo.\n      ")]),s("footer",{staticClass:"blockquote-footer text-right"},[t._v("Adonis Vuejs "),s("cite",[t._v("Frameworks")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"muted mt-4 text-center"},[t._v("\n      Not registered?\n      "),s("a",{staticClass:"text-info",attrs:{href:"#","data-toggle":"modal","data-target":"#exampleModalLong"}},[t._v("\n        Create an account\n      ")])])}],nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ValidationProvider",{attrs:{vid:t.vid,name:t.name,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,r=e.touched,i=e.changed,o=e.validated;return[s("div",{staticClass:"form-group"},[t.hiddenLabel?t._e():s("label",{staticClass:"text-secondary"},[t._v(t._s(t.name))]),"checkbox"===t.$attrs.type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.innerValue,expression:"innerValue"}],staticClass:"form-control rounded-form",attrs:{placeholder:t.$attrs.placeholder||"Enter "+t.name.toLowerCase()+" here...",type:"checkbox"},domProps:{checked:Array.isArray(t.innerValue)?t._i(t.innerValue,null)>-1:t.innerValue},on:{change:function(e){var s=t.innerValue,a=e.target,r=!!a.checked;if(Array.isArray(s)){var i=null,o=t._i(s,i);a.checked?o<0&&(t.innerValue=s.concat([i])):o>-1&&(t.innerValue=s.slice(0,o).concat(s.slice(o+1)))}else t.innerValue=r}}}):"radio"===t.$attrs.type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.innerValue,expression:"innerValue"}],staticClass:"form-control rounded-form",attrs:{placeholder:t.$attrs.placeholder||"Enter "+t.name.toLowerCase()+" here...",type:"radio"},domProps:{checked:t._q(t.innerValue,null)},on:{change:function(e){t.innerValue=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.innerValue,expression:"innerValue"}],staticClass:"form-control rounded-form",attrs:{placeholder:t.$attrs.placeholder||"Enter "+t.name.toLowerCase()+" here...",type:t.$attrs.type},domProps:{value:t.innerValue},on:{input:function(e){e.target.composing||(t.innerValue=e.target.value)}}}),t._t("description"),r||!i&&o?s("span",{staticClass:"form-text text-danger small"},[t._v("\n      "+t._s(a[0])+"\n    ")]):t._e()],2)]}}],null,!0)})},lt=[],ct={name:"TextField",props:{vid:{type:String},value:{type:null},hiddenLabel:{type:Boolean,default:!1},rules:{type:[Object,String],default:""},name:{type:String,required:!0}},data:()=>({innerValue:""}),watch:{innerValue(t){this.$emit("input",t)},value(t){this.innerValue=t}},created(){this.value&&(this.innerValue=this.value)}},ut=ct,dt=(s("7d97"),Object(y["a"])(ut,nt,lt,!1,null,"004cf7b0",null)),gt=dt.exports,pt={components:{TextField:gt},data(){return{signUpForm:{email:null,username:null,passwword:null},signInForm:{usernameOrEmail:null,passwword:null}}},methods:{async handleSignUp(t){const e=await this.$refs.signUpValidator.validate();e&&this.$store.dispatch("signUp",this.signUpForm)},async handleSignIn(t){await this.$refs.signInValidator.validate()}}},mt=pt,ht=(s("bbf1"),Object(y["a"])(mt,it,ot,!1,null,"09e8f0a8",null)),vt=(ht.exports,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("div",{staticClass:"ma-10"},[s("v-carousel",{attrs:{cycle:""}},t._l(t.iamges,(function(t,e){return s("v-carousel-item",{key:e},[s("v-sheet",{attrs:{height:"100%",align:"center",justify:"center"}},[s("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[s("v-img",{staticClass:"grey lighten-2",attrs:{src:t,"aspect-ratio":"1","max-width":"100%","max-height":"100%"}})],1)],1)],1)})),1)],1)])}),ft=[],_t={data(){return{iamges:["https://images.pexels.com/photos/326055/pexels-photo-326055.jpeg?cs=srgb&dl=close-up-of-leaf-326055.jpg&fm=jpg","https://images.pexels.com/photos/459225/pexels-photo-459225.jpeg?cs=srgb&dl=daylight-environment-forest-459225.jpg&fm=jpg","https://images.pexels.com/photos/257360/pexels-photo-257360.jpeg?cs=srgb&dl=trees-in-park-257360.jpg&fm=jpg"]}}},bt=_t,yt=(s("481f"),s("5e66")),Ct=s("3e35"),xt=s("8dd9"),St=Object(y["a"])(bt,vt,ft,!1,null,null,null),Ot=St.exports;x()(St,{VCarousel:yt["a"],VCarouselItem:Ct["a"],VImg:Z["a"],VRow:et["a"],VSheet:xt["a"]});var wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-flex",{staticClass:"px-5 py-5"},[""!==t.alertType?s("v-alert",{attrs:{type:t.alertType}},[t._v(t._s(t.messageAlert)+"!")]):t._e(),s("v-layout",{attrs:{"justify-center":""}},[s("v-flex",[s("span",{staticClass:"display-1 blue-grey--text font-weight-medium font-italic"},[t._v("\n        My Music\n      ")])])],1),s("v-layout",{attrs:{"justify-center":""}},[s("v-flex",[s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"60%",outlined:""}},[s("v-list-item",{attrs:{"three-line":""}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"mb-1"},[t._v("Add a music")]),s("div",[s("v-text-field",{attrs:{label:"Post's name",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("v-textarea",{attrs:{name:"input-7-1",label:"Description",value:t.txtDescription,placeholder:"Inter text..."},model:{value:t.txtDescription,callback:function(e){t.txtDescription=e},expression:"txtDescription"}}),s("div",{staticClass:"row"},[s("v-file-input",{staticClass:"ml-3",attrs:{accept:"image/png, image/jpeg, image/bmp",placeholder:"Pick an image","prepend-icon":"mdi-camera",label:"image"},on:{change:t.onFileChange},model:{value:t.path,callback:function(e){t.path=e},expression:"path"}}),s("v-spacer"),s("v-select",{attrs:{items:t.categories,filled:"","item-text":"name","item-value":"id",label:"Select category"},model:{value:t.selectCategory,callback:function(e){t.selectCategory=e},expression:"selectCategory"}})],1)],1),t.imageLocal?s("v-img",{staticClass:"ma-3",attrs:{"aspect-ratio":"1","max-width":"200",src:t.imageLocal,contain:""}}):t._e()],1)],1),s("v-card-actions",[s("v-btn",{attrs:{text:"",color:"red",disabled:t.isDisable,loading:t.requestingCreatePost},on:{click:t.handleCancel}},[t._v("Cancel")]),s("v-btn",{attrs:{text:"",color:"green",disabled:t.isDisable,loading:t.requestingCreatePost},on:{click:t.handleSave}},[t._v("Post")])],1)],1)],1)],1),s("v-layout",{attrs:{wrap:""}},[s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"row",attrs:{"infinite-scroll-disabled":"requestigGetPost","infinite-scroll-distance":"10"}},t._l(t.posts,(function(e,a){return s("v-flex",{key:a},[s("v-card",{staticClass:"mx-auto ma-2",attrs:{"max-width":"400",height:"400"}},[s("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:e.image_url}},[s("v-card-title",{staticClass:"shadow",domProps:{textContent:t._s(e.name_post)}})],1),s("v-card-subtitle",{staticClass:"desciption",domProps:{textContent:t._s(e.description_post)}}),s("v-card-actions",[s("v-btn",{attrs:{color:"orange",text:""}},[t._v("\n              Edit\n            ")]),s("v-btn",{attrs:{color:"red",text:""},on:{click:function(s){return t.handleDeletePost(e.id)}}},[t._v("\n              Delete\n            ")])],1)],1)],1)})),1)])],1)},Ut=[],It={data(){return{txtDescription:"",imageLocal:null,path:null,selectCategory:null,name:null,messageAlert:"",alertType:"",currentUser:null,currenUser:null,page:1}},mounted(){this.$store.dispatch("getCategories");const t=f.getAuth(),e={id:t.id,page:this.page};this.$store.dispatch("getPostByUserId",e)},computed:{...Object(d["b"])({categories:t=>Object(g["get"])(t,"post.categories.result",[]),requestingCreatePost:t=>Object(g["get"])(t,"post.createPost.requesting",!1),requestigGetPost:t=>Object(g["get"])(t,"post.postByUserId.requesting"),posts:t=>Object(g["get"])(t,"post.postByUserId.result.posts",[]),statePostByUser:t=>Object(g["get"])(t,"post.postByUserId"),createPost:t=>Object(g["get"])(t,"post.createPost.result")}),isDisable(){return!(this.txtDescription&&this.imageLocal&&this.name&&this.selectCategory)},userInfor(){return f.getAuth()}},watch:{createPost(t,e){if(!Object(g["isEqual"])(t,e)){const t={id:this.userInfor.id,page:this.page};this.$store.dispatch("getPostByUserId",t)}}},methods:{onFileChange(t){this.createImage(t),this.path=t},createImage(t){if(t){var e=new FileReader;e.onload=t=>{this.imageLocal=t.target.result},e.readAsDataURL(t)}else this.imageLocal=null},resetData(){this.txtDescription="",this.imageLocal=null,this.path=null,this.name=null,this.selectCategory={}},handleCancel(){this.resetData()},handleSave(){console.log("selectCategory",this.selectCategory),this.$store.dispatch("createPost",{name:this.name,description:this.txtDescription,image:this.path,userId:this.userInfor.id,categoryId:this.selectCategory}).then(()=>{const t=Object(g["get"])(this.$store,"state.post.createPost.status");this.alertType=t,"success"===t?(setTimeout(()=>{this.resetData()},1e3),this.messageAlert="Create success!!!"):this.messageAlert=`Create ${t}!.. Please! check again`,setTimeout(()=>{this.alertType="",this.messageAlert=""},5e3)})},loadMore(){if(Object(g["get"])(this.statePostByUser,"result.page")>=Object(g["get"])(this.statePostByUser,"result.lastPage"))return;const t={id:this.userInfor.id,page:Object(g["get"])(this.statePostByUser,"result.page")+1};this.requestigGetPost||this.$store.dispatch("getPostByUserId",t)},handleDeletePost(t){console.log("postId",t);const e={postId:t,userId:this.userInfor.id};this.$store.dispatch("deletePost",e)}}},Pt=It,Tt=(s("3ec7"),s("23a7")),Et=s("a844"),Vt=Object(y["a"])(Pt,wt,Ut,!1,null,null,null),kt=Vt.exports;x()(Vt,{VAlert:S["a"],VBtn:I["a"],VCard:P["a"],VCardActions:T["a"],VCardSubtitle:T["b"],VCardTitle:T["d"],VFileInput:Tt["a"],VFlex:X["a"],VImg:Z["a"],VLayout:tt["a"],VListItem:F["a"],VListItemContent:D["a"],VListItemTitle:D["c"],VSelect:st["a"],VSpacer:B["a"],VTextField:R["a"],VTextarea:Et["a"]});var jt=s("bc3a"),At=s.n(jt);At.a.defaults.timeout=3e4,At.a.defaults.baseURL="http://127.0.0.1:3333",At.a.interceptors.request.use(t=>t,t=>Promise.reject(t)),At.a.interceptors.response.use(t=>t,t=>Promise.reject(t.response||t.request||t.message));const Lt={setAuthorizationHeader(t){At.a.defaults.headers.Authorization=t},request(t={}){return At.a.request(t)},get(t,e={}){return At.a.get(t,e)},post(t,e={},s={}){return At.a.post(t,e,s)},put(t,e={},s={}){return At.a.put(t,e,s)},patch(t,e={},s={}){return At.a.patch(t,e,s)},delete(t,e={}){return At.a.delete(t,e)}};var qt=Lt;a["default"].use(z["a"]);let Ft=new z["a"]({mode:"history",base:"/",routes:[{path:"/",name:"unAuthor",component:Ot,meta:{public:!0,onlyWhenLoggedOut:!0}},{path:"/home",name:"Home",component:rt},{path:"/my-music",name:"MyMucsic",component:kt}]});Ft.beforeEach((t,e,s)=>{const a=t.matched.some(t=>t.meta.public),r=t.matched.some(t=>t.meta.onlyWhenLoggedOut),i=f.getAuth();console.log("currentUser",i);const o=`${Object(g["get"])(i,"type_token")} ${Object(g["get"])(i,"access_token")}`;return qt.setAuthorizationHeader(o),a||i?i&&r?s("/home"):void s():s({path:"/"})});var Dt=Ft;class $t{static registerAccount(t,e){return qt.post("/users/create",t,e)}static loginAccount(t){return qt.post("/users/login",t)}static logoutAccount(t={}){return qt.post("/users/signout",t)}static loginSocail(t={}){return qt.post("/users/login/social",t)}}const Bt="REGISTER_ACCOUNT_REQUEST",Rt="REGISTER_ACCOUNT_SUCCESS",Nt="REGISTER_ACCOUNT_FAIL",Gt="LOGIN_ACCOUNT_REQUEST",Wt="LOGIN_ACCOUNT_SUCCESS",Mt="LOGIN_ACCOUNT_FAIL",zt="LOGOUT_ACCOUNT_REQUEST",Ht="LOGOUT_ACCOUNT_SUCCESS",Qt="LOGOUT_ACCOUNT_FAIL",Jt="GET_CATEGORIES_ACCOUNT_REQUEST",Yt="GET_CATEGORIES_ACCOUNT_SUCCESS",Kt="GET_CATEGORIES_ACCOUNT_FAIL",Xt="CREATE_POST_REQUEST",Zt="CREATE_POST_SUCCESS",te="CREATE_POST_FAIL",ee="GET_POST_BY_USER_ID_REQUEST",se="GET_POST_BY_USER_ID_SUCCESS",ae="GET_POST_BY_USER_ID_FAIL",re="GET_POST_REQUEST",ie="GET_POST_SUCCESS",oe="GET_POST_FAIL",ne="ADD_FAVORITE_REQUEST",le="ADD_FAVORITE_SUCCESS",ce="ADD_FAVORITE_FAIL",ue="DELETE_POST_REQUEST",de="DELETE_POST_SUCCESS",ge="DELETE_POST_FAIL",pe="LOGIN_WITH_SOCIAL_REQUEST",me="LOGIN_WITH_SOCIAL_SUCCESS",he="LOGIN_WITH_SOCIAL_FAIL",ve={signUp:{requesting:!1,status:"",result:null,error:null},login:{requesting:!1,status:"",result:null,error:null},logout:{requesting:!1,status:"",result:null,error:null},loginWithSocail:{requesting:!1,status:"",result:null,error:null}},fe={async signUp({state:t,commit:e},s){e(Bt);try{const t=await $t.registerAccount(s);console.log(t),e(Rt,t)}catch(a){e(Nt,{error:a}),console.log("error",a)}},async login({state:t,commit:e},s){e(Gt);try{const t=await $t.loginAccount(s),a=Object(g["get"])(t,"data.user"),r={...a,access_token:Object(g["get"])(t,"data.access_token.token"),type_token:Object(g["get"])(t,"data.access_token.type")},i=`${Object(g["get"])(t,"data.access_token.type")} ${Object(g["get"])(t,"data.access_token.token")}`;await qt.setAuthorizationHeader(i),await f.setAuth(JSON.stringify(r)),e(Wt,r)}catch(a){e(Mt,{error:a}),console.log("error",a)}},async logout({state:t,commit:e},s){e(zt);try{const t=await f.getAuth();t.access_token;await $t.logoutAccount(),await f.deleteAuth(),Dt.push("/"),e(Ht)}catch(a){e(Qt,{error:a}),console.log("error",a)}},async loginSocial({state:t,commit:e},s){e(pe);try{const t=await $t.loginSocail(s),a=Object(g["get"])(t,"data.user"),r={...a.inforUser,email:a.email,access_token:Object(g["get"])(t,"data.access_token.token"),type_token:Object(g["get"])(t,"data.access_token.type")},i=`${Object(g["get"])(t,"data.access_token.type")} ${Object(g["get"])(t,"data.access_token.token")}`;await qt.setAuthorizationHeader(i),await f.setAuth(JSON.stringify(r)),e(me,t.data)}catch(a){console.log("error",a),e(he,a)}}},_e={[Bt](t){t.signUp.requesting=!0,t.signUp.status=""},[Rt](t,e){t.signUp.requesting=!1,t.signUp.status="success",t.signUp.result=e},[Nt](t,e){t.signUp.requesting=!1,t.signUp.status="error",t.signUp.error=e},[Gt](t){t.login.requesting=!0,t.login.status=""},[Wt](t,e){t.login.requesting=!1,t.login.status="success",t.login.result=e},[Mt](t,e){t.login.requesting=!1,t.login.status="error",t.login.error=e},[zt](t){t.logout.requesting=!0,t.logout.status=""},[Ht](t,e){t.logout.requesting=!1,t.logout.status="success",t.logout.result=e},[Qt](t,e){t.logout.requesting=!1,t.logout.status="error",t.logout.error=e},[pe](t,e){t.loginWithSocail.requesting=!0,t.loginWithSocail.status=""},[me](t,e){t.loginWithSocail.requesting=!1,t.loginWithSocail.status="success",t.loginWithSocail.result=e},[he](t,e){t.loginWithSocail.requesting=!1,t.loginWithSocail.status="error",t.loginWithSocail.error=e}};var be={state:ve,actions:fe,mutations:_e};class ye{static getCategories(){return qt.get("/posts/categories")}static createPost(t){return qt.post("/posts/create",t)}static getPostByUserId(t){return qt.get(`/posts/get-post-by-userId?id=${t.id}&page=${t.page}`)}static getAllPost(t){return qt.get(`/posts/get-post?page=${t}`)}static deletePost(t){return qt.delete(`/posts/delete-post?id=${t.postId}&userId=${t.userId}`)}}class Ce{static uploadImage(t){const e=new FormData;return e.append("name","image"),e.append("image",t),qt.post("/upload",e,{header:{"Content-Type":"multipart/form-data"}})}}class xe{static create(t){return qt.post("/favorites/create",t)}}var Se=s("4627");const Oe=async t=>{try{const e={maxSizeMB:1,maxWidthOrHeight:600,useWebWorker:!0};return await Object(Se["a"])(t,e)}catch(e){return t}},we={categories:{requesting:!1,status:"",result:null,error:null},createPost:{requesting:!1,status:"",result:null,error:null},postByUserId:{requesting:!1,status:"",result:null,error:null},post:{requesting:!1,status:"",result:null,error:null},favorite:{requesting:!1,status:"",result:null,error:null},deletePost:{requesting:!1,status:"",result:null,error:null}},Ue={async getCategories({state:t,commit:e}){e(Jt);try{const t=await ye.getCategories();e(Yt,Object(g["get"])(t,"data.categories",[]))}catch(s){console.log("error",s),e(Kt,s)}},async createPost({state:t,commit:e},s){e(Xt);try{const t=Object(g["get"])(s,"image"),a=await Oe(t),r=await Ce.uploadImage(a),i={...s,image:Object(g["get"])(r,"data.url")},o=await ye.createPost(i);e(Zt,o.data)}catch(a){console.log("error",a),e(te,a)}},async getPostByUserId({state:t,commit:e},s){e(ee);try{const t=await ye.getPostByUserId(s);e(se,t.data)}catch(a){console.log("error",a),e(ae,a)}},async getPosts({state:t,commit:e},s){e(re);try{const t=await ye.getAllPost(s.page);e(ie,t.data)}catch(a){console.log("error",a),e(oe,a)}},async favorite({state:t,commit:e},s){e(ne);try{await xe.create({userId:s.user_id,postId:s.post_id}),e(le,s)}catch(a){console.log("error",a),e(ce,a)}},async deletePost({state:t,commit:e},s){e(ue);try{await ye.deletePost(s),e(de,s)}catch(a){console.log("error",a),e(ge,a)}}},Ie={[Jt](t){t.categories.requesting=!0,t.categories.status=""},[Yt](t,e){t.categories.requesting=!1,t.categories.status="success",t.categories.result=e},[Kt](t,e){t.categories.requesting=!1,t.categories.status="error",t.categories.error=e},[Xt](t){t.createPost.requesting=!0,t.createPost.status=""},[Zt](t,e){t.createPost.requesting=!1,t.createPost.status="success",t.createPost.result=e},[te](t,e){t.createPost.requesting=!1,t.createPost.status="error",t.createPost.error=e},[ee](t){t.postByUserId.requesting=!0,t.postByUserId.status=""},[se](t,e){t.postByUserId.requesting=!1,t.postByUserId.status="success",t.postByUserId.result=1===e.data.page?{...e.data,posts:e.data.data}:{...e.data,posts:[...t.postByUserId.result.posts,...e.data.data]}},[ae](t,e){t.postByUserId.requesting=!1,t.postByUserId.status="error",t.postByUserId.error=e},[re](t){t.postByUserId.requesting=!0,t.postByUserId.status=""},[ie](t,e){t.post.requesting=!1,t.post.status="success",t.post.result=1===e.data.page?{...e.data,posts:e.data.data}:{...e.data,posts:[...t.post.result.posts,...e.data.data]}},[oe](t,e){t.post.requesting=!1,t.post.status="error",t.post.error=e},[ne](t){t.favorite.requesting=!0,t.favorite.status=""},[le](t,e){const s=Object(g["get"])(t,"post.result.posts",[]).find(t=>t.id===e.post_id),a=Object(g["get"])(s,"favorited",[]).find(t=>t.id===e.user_id),r=Object(g["get"])(s,"favorited");t.favorite.requesting=!1,t.favorite.status="success",t.favorite.result=e,t.post.result={...t.post.result,posts:t.post.result.posts.map(t=>{return t.id===e.post_id?a?{...t,__meta__:{favorited_count:Object(g["get"])(t,"__meta__.favorited_count",0)-1},favorited:r.filter(t=>t.id!==e.user_id)}:{...t,__meta__:{favorited_count:Object(g["get"])(t,"__meta__.favorited_count",0)+1},favorited:[...t.favorited,{id:e.user_id}]}:{...t}})}},[ce](t,e){t.favorite.requesting=!1,t.favorite.status="error",t.favorite.error=e},[ue](t){t.deletePost.requesting=!0,t.deletePost.status=""},[de](t,e){t.deletePost.requesting=!1,t.deletePost.status="success",t.post.result={...t.post.result,post:Object(g["get"])(t,"post.result.posts",[]).filter(t=>t.id!==e.postId)},t.postByUserId.result={...t.postByUserId.result,posts:Object(g["get"])(t,"postByUserId.result.posts",[]).filter(t=>t.id!==e.postId)}},[ge](t,e){t.deletePost.requesting=!1,t.deletePost.status="error",t.deletePost.error=e}};var Pe={state:we,actions:Ue,mutations:Ie};a["default"].use(d["a"]);var Te=new d["a"].Store({modules:{user:be,post:Pe}}),Ee={computed:{_(){return p.a}}};a["default"].config.productionTip=!1;const Ve=[Ee];Ve.forEach(t=>a["default"].mixin(t)),a["default"].component("ValidationProvider",r["ValidationProvider"]),a["default"].component("ValidationObserver",r["ValidationObserver"]),a["default"].use(l.a),new a["default"]({router:Dt,store:Te,vuetify:o,render:t=>t(M)}).$mount("#app")},"71ec":function(t,e,s){},"7d97":function(t,e,s){"use strict";var a=s("8dfc"),r=s.n(a);r.a},8106:function(t,e,s){},"8d04":function(t,e,s){},"8dfc":function(t,e,s){},bbf1:function(t,e,s){"use strict";var a=s("8106"),r=s.n(a);r.a},cccb:function(t,e,s){"use strict";var a=s("ff99"),r=s.n(a);r.a},ff99:function(t,e,s){}});
//# sourceMappingURL=app.27402731.js.map